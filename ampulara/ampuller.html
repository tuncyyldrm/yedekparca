<!DOCTYPE html>
<html lang="tr">
<head>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ampul Ürün Kataloğu</title>

	<link rel="icon" type="image/x-icon" href="/resim/yigit-oto/favicon.ico">
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3FW3CNT4XK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3FW3CNT4XK');
</script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
:root {
  --primary-color: #2563eb;
  --primary-hover: #1d4ed8;
  --secondary-color: #1e293b;
  --accent-color: #dc2626;
  --accent-hover: #b91c1c;
  --light-gray: #f2f5f7;
  --medium-gray: #e2e8f0;
  --dark-gray: #64748b;
  --text-color: #1e293b;
  --white: #ffffff;
  --success-color: #16a34a;
  --warning-color: #f59e0b;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
  --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
  --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
  --border-radius: 12px;
  --card-radius: 16px;
  --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
  line-height: 1.6;
  color: var(--text-color);
  background-color: var(--light-gray);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
}

.header {
  text-align: center;
  margin-bottom: 3rem;
}

.header h1 {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--secondary-color);
  margin-bottom: 1rem;
  background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
  
  background-clip: text;              /* Standart özellik */
  -webkit-background-clip: text;      /* WebKit uyumluluğu */
  -webkit-text-fill-color: transparent;
}

.header p {
  color: var(--dark-gray);
  max-width: 700px;
  margin: 0 auto;
  font-size: 1.1rem;
}

.controls {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-bottom: 2.5rem;
  align-items: center;
}

.search-container {
  flex: 1;
  min-width: 300px;
  position: relative;
}

.search-container i {
  position: absolute;
  left: 1rem;
  top: 50%;
  transform: translateY(-50%);
  color: var(--dark-gray);
}

.search-input {
  width: 100%;
  padding: 0.8rem 1rem 0.8rem 2.5rem;
  border: 1px solid var(--medium-gray);
  border-radius: var(--border-radius);
  font-size: 1rem;
  transition: var(--transition);
  box-shadow: var(--shadow-sm);
}

.search-input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.filter-controls {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.filter-btn {
  padding: 0.6rem 1.25rem;
  border: none;
  border-radius: 2rem;
  background-color: var(--white);
  color: var(--secondary-color);
  cursor: pointer;
  transition: var(--transition);
  font-weight: 500;
  box-shadow: var(--shadow-sm);
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.filter-btn:hover {
  background-color: var(--primary-color);
  color: var(--white);
  transform: translateY(-2px);
}

.filter-btn.active {
  background-color: var(--primary-color);
  color: var(--white);
}

.filter-btn i {
  font-size: 0.8rem;
}

.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1.75rem;
  margin-top: 1.5rem;
}

.product-card {
  background-color: var(--white);
  border-radius: var(--card-radius);
  overflow: hidden;
  box-shadow: var(--shadow-sm);
  transition: var(--transition);
  position: relative;
  display: flex;
  flex-direction: column;
  height: 100%;
}

.product-card:hover {
  transform: translateY(-8px);
  box-shadow: var(--shadow-lg);
}

.product-badge {
  position: absolute;
  top: 2.75rem;
  right: 0.75rem;
  background-color: var(--accent-color);
  color: var(--white);
  padding: 0.25rem 0.75rem;
  border-radius: 2rem;
  font-size: 0.75rem;
  font-weight: 600;
  z-index: 2;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.product-images-container {
  display: flex;
  height: 220px;
  background: linear-gradient(135deg, #ffffff  0%, #ffffff  100%);
  position: relative;
  overflow: hidden;
  padding: 1rem;
  gap: 1rem;
}

.product-image-wrapper {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  min-width: 0;
}

.product-image {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  transition: transform 0.5s ease;
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
}

.product-image-label {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: rgba(0,0,0,0.6);
  color: white;
  padding: 0.25rem;
  font-size: 0.7rem;
  text-align: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.product-image-wrapper:hover .product-image-label {
  opacity: 1;
}

.product-card:hover .product-image {
  transform: scale(1.05);
}

.product-details {
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
}

.product-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin: 1rem;
}

.product-code {
  font-weight: 700;
  font-size: 1.25rem;
  color: var(--secondary-color);
  line-height: 1.3;
}

.product-group {
  background-color: var(--primary-color);
  color: var(--white);
  padding: 0.25rem 0.75rem;
  border-radius: 2rem;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.product-specs {
  margin: 1rem 0;
  flex-grow: 1;
}

.spec-row {
  display: flex;
  margin-bottom: 0.75rem;
  font-size: 0.95rem;
}

.spec-label {
  font-weight: 600;
  min-width: 120px;
  color: var(--dark-gray);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.spec-label i {
  font-size: 0.9rem;
  color: var(--primary-color);
}

.spec-value {
  flex: 1;
  font-weight: 500;
}

.product-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 1px solid var(--medium-gray);
}

.product-wattage {
  font-weight: 700;
  color: var(--accent-color);
  font-size: 1.1rem;
}

.view-details {
  background-color: var(--primary-color);
  color: var(--white);
  border: none;
  padding: 0.6rem 1.25rem;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-size: 0.9rem;
  transition: var(--transition);
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.view-details:hover {
  background-color: var(--primary-hover);
  transform: translateY(-2px);
}

.view-details i {
  font-size: 0.8rem;
}

.loading-container {
  grid-column: 1 / -1;
  text-align: center;
  padding: 4rem;
}

.loading {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
}

.loading-spinner {
  border: 4px solid var(--medium-gray);
  border-top: 4px solid var(--primary-color);
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 1s linear infinite;
  margin: 0 auto 20px;
}

.loading-text {
  font-size: 1.1rem;
  color: var(--dark-gray);
  font-weight: 500;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.empty-state {
  grid-column: 1 / -1;
  text-align: center;
  padding: 4rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
}

.empty-icon {
  font-size: 3.5rem;
  color: var(--medium-gray);
}

.empty-text {
  font-size: 1.25rem;
  color: var(--dark-gray);
  max-width: 500px;
  margin: 0 auto;
}

.reset-filters {
  background-color: var(--primary-color);
  color: var(--white);
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-size: 1rem;
  transition: var(--transition);
  font-weight: 500;
  margin-top: 1rem;
}

.reset-filters:hover {
  background-color: var(--primary-hover);
  transform: translateY(-2px);
}

.error-state {
  grid-column: 1 / -1;
  text-align: center;
  padding: 4rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
}

.error-icon {
  font-size: 3.5rem;
  color: var(--accent-color);
}

.error-text {
  font-size: 1.25rem;
  color: var(--dark-gray);
  max-width: 500px;
  margin: 0 auto;
}

.retry-button {
  background-color: var(--accent-color);
  color: var(--white);
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-size: 1rem;
  transition: var(--transition);
  font-weight: 500;
  margin-top: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.retry-button:hover {
  background-color: var(--accent-hover);
  transform: translateY(-2px);
}

@media (max-width: 1024px) {
  .container {
    padding: 1.5rem 1.25rem;
  }
  
  .header h1 {
    font-size: 2.25rem;
  }
  
  .product-grid {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  }
}

@media (max-width: 768px) {
  .header {
    margin-bottom: 2rem;
  }
  
  .header h1 {
    font-size: 2rem;
  }
  
  .controls {
    flex-direction: column;
    align-items: stretch;
  }
  
  .search-container {
    min-width: 100%;
  }
  
  .product-images-container {
    height: 200px;
  }
  
  .spec-row {
    flex-direction: column;
    gap: 0.25rem;
  }
}

@media (max-width: 480px) {
  .container {
    padding: 1.25rem 1rem;
  }
  
  .header h1 {
    font-size: 1.75rem;
  }
  
  .product-grid {
    grid-template-columns: 1fr;
  }
  
  .product-details {
    padding: 1.25rem;
  }
  
  .product-images-container {
   /** flex-direction: column; **/
    height: auto;
  }
  
  .product-image-wrapper {
    height: 150px;
  }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.product-card {
  animation: fadeIn 0.5s ease forwards;
}

.toast {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  background-color: var(--success-color);
  color: white;
  padding: 1rem 1.5rem;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-lg);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  z-index: 1000;
  transform: translateY(100px);
  opacity: 0;
  transition: all 0.3s ease;
}

.toast.show {
  transform: translateY(0);
  opacity: 1;
}

.toast.error {
  background-color: var(--accent-color);
}

.toast.warning {
  background-color: var(--warning-color);
}

.toast i {
  font-size: 1.25rem;
}

.toast-message {
  font-weight: 500;
}

.fab {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background-color: var(--primary-color);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-lg);
  cursor: pointer;
  z-index: 1;
  transition: var(--transition);
}

.fab:hover {
  background-color: var(--primary-hover);
  transform: translateY(-3px) scale(1.05);
}

.fab i {
  font-size: 1.5rem;
}



.modal {
    display: none; /* Hidden by default */
    position: fixed;
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4); /* Black with opacity */
    animation: fadeIn 0.3s ease-out; /* Fade-in animation */
}

/* Animation for modal fade in */
@keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
}

.modal-content {
    background-color: #fefefe;
    margin: 5% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 90%; /* Increased width for better presentation */
    max-width: 575px; /* Max width for large screens */
    border-radius: 10px; /* Rounded corners */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Subtle shadow */
}

.close {
    color: #aaa;
    font-size: 32px;
    font-weight: bold;
    position: absolute;
    right: 15px;
    top: 10px;
    cursor: pointer;
    transition: color 0.3s;
}

.close:hover,
.close:focus {
    color: #ff6347; /* A noticeable red when hovered */
    text-decoration: none;
}

@media (max-width: 768px) {
    .modal-content {
        width: 85%;
        margin: 10% auto; /* Adjusted margin for smaller screens */
    }

    .close {
        font-size: 28px; /* Smaller close button on mobile */
    }
}

    </style>
</head>
<body style="min-height: 100vh; display: flex; flex-direction: column;">
<div style="flex: 1;">
    <div class="container">
        <header class="header">
            <h1>Otomotiv Ampulleri Kataloğu</h1>
            <p>Ayrıntılı teknik özelliklere sahip yüksek kaliteli otomotiv ampullerinin kapsamlı koleksiyonumuza göz atın</p>
        </header>
        
        <div class="controls">
            <div class="search-container">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" placeholder="Ürünleri ara..." id="searchInput">
            </div>
            <div class="filter-controls" id="filterControls">
                <button class="filter-btn active" data-filter="all">
                    <i class="fas fa-layer-group"></i> Tümü
                </button>
                <button class="filter-btn" data-filter="far">
                    <i class="fas fa-lightbulb"></i> Farlar
                </button>
                <button class="filter-btn" data-filter="sis">
                    <i class="fas fa-car"></i> Sis Farları
                </button>
                <button class="filter-btn" data-filter="İç">
                    <i class="fas fa-lightbulb"></i> İç mekan
                </button>
            </div>
        </div>
        
        <div id="product-container" class="product-grid">
            <div class="loading-container">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <div class="loading-text">Ürünler yükleniyor...</div>
                </div>
            </div>
        </div>
    </div>

    <div class="fab" id="scrollToTop" title="Scroll to top">
        <i class="fas fa-arrow-up"></i>
    </div>

    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span class="toast-message">Ürünler başarıyla yüklendi</span>
    </div>

<div id="productModal" class="modal">
    <div class="modal-content">
        <span id="closeModal" class="close">&times;</span>
        <div id="modalProductDetails"></div>
        <div class="modal-footer">
        </div>
    </div>
</div>
</div>

<footer style="background-color: #333333;color: white;text-align: center;padding: 15px 0;position: relative;width: 100%;font-size: 14px;box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);">
  © 2022 - <span id="currentYear"></span> <a target="_blank" style="color: #ffcc00;" href="https://tuncyyldrm.vercel.app" >Tuncay YILDIRIM</a>
</footer>

<!-- JavaScript -->
<script>
  function toggleContactPopup() {
    const popup = document.getElementById("contact-popup");
    popup.style.display = (popup.style.display === "none" ? "block" : "none");
  }

  // Dinamik olarak güncel yılı gösterme
  document.getElementById('currentYear').textContent = new Date().getFullYear();

  // Service Worker kaydı
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker
      .register('/service-worker.js', { scope: '/' })
      .then(() => console.log('Ana dizin için Service Worker kaydedildi.'))
      .catch(err => console.error('Service Worker kaydı başarısız:', err));
  }
</script>
    <script>
        // Google Sheets API configuration
        const apiKey = 'AIzaSyCQ_SmNuv0JxBBtaiSi7LGxPmeqOPygjYc';
        const spreadsheetId = '1E5cy7u7-ht3bMzU374TGX_zu7q09_Nn2HLkzZb0n7DM';
        const range = 'Sayfa5!b2:k'; // Adjust range to match your data columns
        const urlParams = new URLSearchParams(window.location.search);
const productCode = urlParams.get('product');

        // Column mapping
        const COLUMNS = {
            CODE: 0,        // yigitkod
            GROUP: 1,       // grup
            IMAGE1: 2,      // r1
            IMAGE2: 3,      // r2
            DIMENSIONS: 4,  // Product dimensions
            VOLTAGE: 5,     // Voltage
            ECE_TYPE: 6,    // ECE Type
            BASE: 7,        // Base
            WATTAGE: 8,     // Wattage
            DESCRIPTION: 9  // ekaciklama
        };

        // DOM elements
        const productContainer = document.getElementById('product-container');
        const searchInput = document.getElementById('searchInput');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const scrollToTopBtn = document.getElementById('scrollToTop');
        const toast = document.getElementById('toast');
        
        // Global variables
        let allProducts = [];
        let filteredProducts = [];

document.addEventListener('DOMContentLoaded', () => {
    fetchGoogleSheetData();
    setupEventListeners();
});
        function setupEventListeners() {
            searchInput.addEventListener('input', () => {
                filterProducts();
            });
            
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    filterProducts();
                });
            });
            
            scrollToTopBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
            
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    scrollToTopBtn.style.opacity = '1';
                    scrollToTopBtn.style.visibility = 'visible';
                } else {
                    scrollToTopBtn.style.opacity = '0';
                    scrollToTopBtn.style.visibility = 'hidden';
                }
            });
        }

async function fetchGoogleSheetData() {
    const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${range}?key=${apiKey}`;

    try {
        const response = await fetch(url);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        
        if (data.values && data.values.length > 0) {
            allProducts = data.values;
            filteredProducts = [...allProducts];
            displayData(allProducts);
            showToast('Ürünler başarıyla yüklendi', 'başarılı');
            
            // Veriler yüklendikten sonra URL parametre kontrolü yapılır
            checkProductParam();
        } else {
            showEmptyState('No products found in the sheet');
        }
    } catch (error) {
        console.error('Error fetching Google Sheets data:', error);
        showErrorState(`Error loading products: ${error.message}`);
    }
}

function checkProductParam() {
    const urlParams = new URLSearchParams(window.location.search);
    const productCode = urlParams.get('product');

    // Eğer 'product' parametresi varsa, ürünü bul ve popup'ı aç
    if (productCode) {
        const productIndex = allProducts.findIndex(product => product[COLUMNS.CODE] === productCode);
        if (productIndex !== -1) {
            // Doğru ürün bulunduysa, detayları popup'ta göster
            showProductDetails(productIndex);
        }
    }
}

function filterProducts() {
    const searchTerm = searchInput.value.toLocaleLowerCase('tr-TR');
    const activeFilter = document.querySelector('.filter-btn.active').dataset.filter.toLocaleLowerCase('tr-TR');

    filteredProducts = allProducts.filter(product => {
        const matchesFilter = activeFilter === 'all' || 
                              (product[COLUMNS.CODE] && product[COLUMNS.CODE].toLocaleLowerCase('tr-TR').includes(activeFilter)) || 
                              (product[COLUMNS.GROUP] && product[COLUMNS.GROUP].toLocaleLowerCase('tr-TR').includes(activeFilter)) ||
                              (product[COLUMNS.DIMENSIONS] && product[COLUMNS.DIMENSIONS].toLocaleLowerCase('tr-TR').includes(activeFilter)) ||
                              (product[COLUMNS.VOLTAGE] && product[COLUMNS.VOLTAGE].toLocaleLowerCase('tr-TR').includes(activeFilter)) ||
                              (product[COLUMNS.ECE_TYPE] && product[COLUMNS.ECE_TYPE].toLocaleLowerCase('tr-TR').includes(activeFilter)) ||
                              (product[COLUMNS.BASE] && product[COLUMNS.BASE].toLocaleLowerCase('tr-TR').includes(activeFilter)) ||
                              (product[COLUMNS.DESCRIPTION] && product[COLUMNS.DESCRIPTION].toLocaleLowerCase('tr-TR').includes(activeFilter)) ||
                              (product[COLUMNS.WATTAGE] && product[COLUMNS.WATTAGE].toLocaleLowerCase('tr-TR').includes(activeFilter));

        const matchesSearch = searchTerm === '' || 
                              (product[COLUMNS.CODE] && product[COLUMNS.CODE].toLocaleLowerCase('tr-TR').includes(searchTerm)) || 
                              (product[COLUMNS.GROUP] && product[COLUMNS.GROUP].toLocaleLowerCase('tr-TR').includes(searchTerm)) ||
                              (product[COLUMNS.DIMENSIONS] && product[COLUMNS.DIMENSIONS].toLocaleLowerCase('tr-TR').includes(searchTerm)) ||
                              (product[COLUMNS.VOLTAGE] && product[COLUMNS.VOLTAGE].toLocaleLowerCase('tr-TR').includes(searchTerm)) ||
                              (product[COLUMNS.ECE_TYPE] && product[COLUMNS.ECE_TYPE].toLocaleLowerCase('tr-TR').includes(searchTerm)) ||
                              (product[COLUMNS.BASE] && product[COLUMNS.BASE].toLocaleLowerCase('tr-TR').includes(searchTerm)) ||
                              (product[COLUMNS.DESCRIPTION] && product[COLUMNS.DESCRIPTION].toLocaleLowerCase('tr-TR').includes(searchTerm)) ||
                              (product[COLUMNS.WATTAGE] && product[COLUMNS.WATTAGE].toLocaleLowerCase('tr-TR').includes(searchTerm));

        return matchesFilter && matchesSearch;
    });

    displayData(filteredProducts);
}


 function displayData(products) {
    if (products.length === 0) {
        showEmptyState('Arama kriterlerinize uyan ürün bulunamadı');
        return;
    }
    
    productContainer.innerHTML = '';
    
    products.forEach((product, index) => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.style.animationDelay = `${index * 0.05}s`;

        const isNew = index < 1;
        const hasImage1 = product[COLUMNS.IMAGE1] && product[COLUMNS.IMAGE1].trim() !== '';
        const hasImage2 = product[COLUMNS.IMAGE2] && product[COLUMNS.IMAGE2].trim() !== '';

        card.innerHTML = `
            ${isNew ? '<div class="product-badge">Yeni</div>' : ''}
            <div class="product-header">
                <span class="product-code">${product[COLUMNS.CODE] || 'N/A'}</span>
                <span class="product-group">${product[COLUMNS.GROUP] || 'N/A'}</span>
            </div>
            
            <div class="product-images-container">
                ${hasImage1 ? `
                <div class="product-image-wrapper">
                    <img src="${product[COLUMNS.IMAGE1]}" 
                         alt="${product[COLUMNS.CODE] || ''} Product Image" 
                         class="product-image"
                         onerror="this.parentElement.style.display='none'">
                    <div class="product-image-label">Ürün Görünümü</div>
                </div>
                ` : ''}
                
                ${hasImage2 ? `
                <div class="product-image-wrapper">
                    <img src="${product[COLUMNS.IMAGE2]}" 
                         alt="${product[COLUMNS.CODE] || ''} Base Drawing" 
                         class="product-image"
                         onerror="this.parentElement.style.display='none'">
                    <div class="product-image-label">Temel Çizim</div>
                </div>
                ` : ''}
            </div>
            
            <div class="product-details">
                <div class="product-specs">
                    <div class="spec-row">
                        <span class="spec-label"><i class="fas fa-ruler-combined"></i> Boyutlar:</span>
                        <span class="spec-value">${product[COLUMNS.DIMENSIONS] || 'N/A'} mm</span>
                    </div>
                    <div class="spec-row">
                        <span class="spec-label"><i class="fas fa-bolt"></i> Volt:</span>
                        <span class="spec-value">${product[COLUMNS.VOLTAGE] || 'N/A'}</span>
                    </div>
                    <div class="spec-row">
                        <span class="spec-label"><i class="fas fa-certificate"></i> ECE Tipi:</span>
                        <span class="spec-value">${product[COLUMNS.ECE_TYPE] || 'N/A'}</span>
                    </div>
                    <div class="spec-row">
                        <span class="spec-label"><i class="fas fa-plug"></i> Temel:</span>
                        <span class="spec-value">${product[COLUMNS.BASE] || 'N/A'}</span>
                    </div>
                    <div class="spec-row">
                        <span class="spec-label"><i class="fas fa-plug"></i> Açıklama:</span>
                        <span class="spec-value">${product[COLUMNS.DESCRIPTION] || 'N/A'}</span>
                    </div>
                </div>
                
                <div class="product-footer">
                    <div class="product-wattage">
                        ${product[COLUMNS.WATTAGE] || 'N/A'}
                    </div>
                    <button class="view-details" onclick="showProductDetails(${index})">
                        <i class="fas fa-info-circle"></i> Detaylar
                    </button>
                </div>
            </div>
            
        `;
        
        productContainer.appendChild(card);
    });
}

// showProductDetails function, now includes product images in the modal
function showProductDetails(index) {
    const product = filteredProducts[index];

    // Modal içeriğini doldurun
    const modalContent = document.getElementById('modalProductDetails');
    modalContent.innerHTML = `
        <h2>${product[COLUMNS.CODE]} - ${product[COLUMNS.GROUP]}</h2>
        <p><strong>Boyutlar:</strong> ${product[COLUMNS.DIMENSIONS] || 'N/A'} mm</p>
        <p><strong>Volt:</strong> ${product[COLUMNS.VOLTAGE] || 'N/A'}</p>
        <p><strong>ECE Tipi:</strong> ${product[COLUMNS.ECE_TYPE] || 'N/A'}</p>
        <p><strong>Temel:</strong> ${product[COLUMNS.BASE] || 'N/A'}</p>
        <p><strong>Watt:</strong> ${product[COLUMNS.WATTAGE] || 'N/A'}</p>
        <p><strong>Açıklama:</strong> ${product[COLUMNS.DESCRIPTION] || 'Açıklama bulunamadı.'}</p>
		
    `;
	
	
// Add images if available
let imagesHtml = '';

if (product[COLUMNS.IMAGE1]) {
    imagesHtml += `
        <div class="product-image-wrapper">
            <img src="${product[COLUMNS.IMAGE1]}" 
                 alt="${product[COLUMNS.CODE] || ''} Product Image" 
                 class="product-image"
                 onerror="this.parentElement.style.display='none'">
            <div class="product-image-label">Ürün Görünümü</div>
        </div>
    `;
}

if (product[COLUMNS.IMAGE2]) {
    imagesHtml += `
        <div class="product-image-wrapper">
            <img src="${product[COLUMNS.IMAGE2]}" 
                 alt="${product[COLUMNS.CODE] || ''} Base Drawing" 
                 class="product-image"
                 onerror="this.parentElement.style.display='none'">
            <div class="product-image-label">Temel Çizim</div>
        </div>
    `;
}

if (imagesHtml) {
    modalContent.innerHTML += `
        <div class="product-images-container">
            ${imagesHtml}
        </div>
    `;
}

    // Modal'ı göster
    document.getElementById('productModal').style.display = "block";

    // URL'yi güncelle
    const newUrl = `${window.location.pathname}?product=${product[COLUMNS.CODE]}`;
    history.pushState({ product: product[COLUMNS.CODE] }, '', newUrl);
}




// Modal'ı kapatma işlemi
document.getElementById('closeModal').addEventListener('click', () => {
    document.getElementById('productModal').style.display = "none";
    
    // URL parametresini sıfırlama
    history.pushState({}, '', window.location.pathname);
});

// Modal dışına tıklama ile kapatma işlemi
window.onclick = function(event) {
    if (event.target === document.getElementById('productModal')) {
        document.getElementById('productModal').style.display = "none";
        
        // URL parametresini sıfırlama
        history.pushState({}, '', window.location.pathname);
    }
};

        function showEmptyState(message) {
            productContainer.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-box-open"></i>
                    </div>
                    <div class="empty-text">${message}</div>
                    <button class="reset-filters" id="resetFilters">
                        <i class="fas fa-sync-alt"></i> Filtreleri Sıfırla
                    </button>
                </div>
            `;
            
            document.getElementById('resetFilters')?.addEventListener('click', () => {
                searchInput.value = '';
                filterButtons.forEach(btn => btn.classList.remove('active'));
                filterButtons[0].classList.add('active');
                filterProducts();
            });
        }

        function showErrorState(message) {
            productContainer.innerHTML = `
                <div class="error-state">
                    <div class="error-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="error-text">${message}</div>
                    <button class="retry-button" id="retryButton">
                        <i class="fas fa-sync-alt"></i> Tekrar deneyin
                    </button>
                </div>
            `;
            
            document.getElementById('retryButton')?.addEventListener('click', fetchGoogleSheetData);
        }

        function showToast(message, type = 'success') {
            const toastIcon = toast.querySelector('i');
            const toastMessage = toast.querySelector('.toast-message');
            
            toastMessage.textContent = message;
            
            if (type === 'error') {
                toastIcon.className = 'fas fa-exclamation-circle';
            } else if (type === 'warning') {
                toastIcon.className = 'fas fa-exclamation-triangle';
            } else {
                toastIcon.className = 'fas fa-check-circle';
            }
            
            toast.className = 'toast';
            if (type) {
                toast.classList.add(type);
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>